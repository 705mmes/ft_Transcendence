{% extends 'two_factor/_base.html' %}
{% load static %}

{% block content %}
    <link rel="stylesheet" href="{% static 'css/2fa.css' %}">
	{% include 'authentication/navbar.html' %}
	{% block page_content %}
		<h1>Setup Two-Factor Authentication</h1>
		
		<p>To enhance the security of your account, we recommend setting up two-factor authentication (2FA).</p>
		
		<h2>Step 1: Scan the QR Code</h2>
		<p>Use an authenticator app like Google Authenticator or Authy to scan the QR code below.</p>
		
		<!-- QR Code for 2FA Setup -->
		<div class="qr-code">
            <img src="{{ qr_url }}" alt="QR Code for 2FA Setup">
        </div>
		
		<h2>Step 2: Enter the Verification Code</h2>
		<p>After scanning the QR code, enter the code generated by your authenticator app below:</p>
		
		<!-- 2FA Token Form -->
		<form id="otp-form" action="{% url 'redirect_to_2fa_setup' %}" method="post">
            {% csrf_token %}
			<label for="otp_device">Select OTP Device:</label>
    		{{ form.otp_device }}
			<label for="otp_token">OTP token:</label>
            {{ form.otp_token }}
            <button type="submit">Verify</button>
            <div id="error-message" style="color: red;">
				{% if form.errors %}
            		{% for error in form.non_field_errors %}
                		{{ error }}
            		{% endfor %}
       			{% endif %}
			</div>
        </form>
		
	{% endblock %}
{% endblock %}
